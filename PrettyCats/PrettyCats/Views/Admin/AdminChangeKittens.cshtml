@using PrettyCats.Database
@model IEnumerable<Pets>

@{
	ViewBag.Title = "AdminDisplayAllKittens";
	Layout = "~/Views/Layouts/_AdminPanelLayout.cshtml";
}

<style>
	#selectedFiles img {
		max-width: 125px;
		max-height: 125px;
		float: left;
		margin-bottom: 10px;
	}
</style>

<script>

	var files = [];
	
	function iterateFiles(filesArray, kittenName) {
		for (var i = 0; i < filesArray.length; i++) {
			for (var j = 0; j < filesArray[i].length; j++) {
				var request = new XMLHttpRequest();
				request.open('post', '@Url.Action("AddImage", "Admin")', false);
				request.setRequestHeader("Content-Type", "multipart/form-data");
				request.setRequestHeader("X-File-Name", kittenName);
				request.setRequestHeader("X-File-Size", filesArray[i][j].fileSize);
				request.setRequestHeader("X-File-Type", filesArray[i][j].type);
				request.onreadystatechange = function () {
					if (request.readyState == 4) {
						if (request.status == 200) {
							if (i == filesArray.length - 1 && j == filesArray[i].length - 1)
								alert("Все файлы успешно загружены!!!");
						}
					}
				}
				request.send(filesArray[i][j]);
			}
		}
	}
</script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>

<a href="AdminPanel" class="btn-admin btn-red">Назад</a>

@Html.ActionLink("Добавить", "AddKitten", "Admin", new { id = "update-container", @class = "btn-admin btn-red" })


@foreach (var i in Model)
{
	@Html.Partial("KittenOnTheAdminPageHtml", i)
}
